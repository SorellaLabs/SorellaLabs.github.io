<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="More constrained version of State that uses Boxed database with a lifetime."><title>StateDBBox in reth_revm::db - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-e883e87179a81222.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="reth_revm" data-themes="" data-resource-suffix="" data-rustdoc-version="1.76.0-nightly (de686cbc6 2023-12-14)" data-channel="nightly" data-search-js="search-874d56868bf05518.js" data-settings-js="settings-fe03fdc259827cd2.js" ><script src="../../static.files/storage-bc37acceda91d44a.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-77dede896d6ac08e.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-5d8b3c7633ad77ba.css"></noscript><link rel="icon" href="https://avatars0.githubusercontent.com/u/97369466?s=256"></head><body class="rustdoc type"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../reth_revm/index.html"><img src="https://raw.githubusercontent.com/paradigmxyz/reth/main/assets/reth-docs.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../reth_revm/index.html"><img src="https://raw.githubusercontent.com/paradigmxyz/reth/main/assets/reth-docs.png" alt="logo"></a><h2><a href="../../reth_revm/index.html">reth_revm</a><span class="version">0.1.0-alpha.14</span></h2></div><h2 class="location"><a href="#">StateDBBox</a></h2><div class="sidebar-elems"><section><h3><a href="#aliased-type">Aliased type</a></h3><h3><a href="#fields">Fields</a></h3><ul class="block field"><li><a href="#structfield.block_hashes">block_hashes</a></li><li><a href="#structfield.bundle_state">bundle_state</a></li><li><a href="#structfield.cache">cache</a></li><li><a href="#structfield.database">database</a></li><li><a href="#structfield.transition_state">transition_state</a></li><li><a href="#structfield.use_preloaded_bundle">use_preloaded_bundle</a></li></ul></section><h2><a href="index.html">In reth_revm::db</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Type Alias <a href="../index.html">reth_revm</a>::<wbr><a href="index.html">db</a>::<wbr><a class="type" href="#">StateDBBox</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/revm/db/states/state.rs.html#22">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub type StateDBBox&lt;'a, E&gt; = <a class="struct" href="../struct.State.html" title="struct reth_revm::State">State</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../precompile/primitives/db/trait.Database.html" title="trait reth_revm::precompile::primitives::db::Database">Database</a>&lt;Error = E&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'a&gt;&gt;;</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>More constrained version of State that uses Boxed database with a lifetime.</p>
<p>This is used to make it easier to use State.</p>
</div></details><h2 id="aliased-type" class="section-header">Aliased Type<a href="#aliased-type" class="anchor">§</a></h2><pre class="rust item-decl"><code>struct StateDBBox&lt;'a, E&gt; {
    pub cache: <a class="struct" href="../struct.CacheState.html" title="struct reth_revm::CacheState">CacheState</a>,
    pub database: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../precompile/primitives/db/trait.Database.html" title="trait reth_revm::precompile::primitives::db::Database">Database</a>&lt;Error = E&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'a&gt;,
    pub transition_state: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../struct.TransitionState.html" title="struct reth_revm::TransitionState">TransitionState</a>&gt;,
    pub bundle_state: <a class="struct" href="struct.BundleState.html" title="struct reth_revm::db::BundleState">BundleState</a>,
    pub use_preloaded_bundle: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
    pub block_hashes: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/collections/btree/map/struct.BTreeMap.html" title="struct alloc::collections::btree::map::BTreeMap">BTreeMap</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, <a class="struct" href="../precompile/primitives/struct.FixedBytes.html" title="struct reth_revm::precompile::primitives::FixedBytes">FixedBytes</a>&lt;32&gt;&gt;,
}</code></pre><h2 id="fields" class="fields section-header">Fields<a href="#fields" class="anchor">§</a></h2><span id="structfield.cache" class="structfield section-header"><a href="#structfield.cache" class="anchor field">§</a><code>cache: <a class="struct" href="../struct.CacheState.html" title="struct reth_revm::CacheState">CacheState</a></code></span><div class="docblock"><p>Cached state contains both changed from evm execution and cached/loaded account/storages
from database. This allows us to have only one layer of cache where we can fetch data.
Additionally we can introduce some preloading of data from database.</p>
</div><span id="structfield.database" class="structfield section-header"><a href="#structfield.database" class="anchor field">§</a><code>database: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../precompile/primitives/db/trait.Database.html" title="trait reth_revm::precompile::primitives::db::Database">Database</a>&lt;Error = E&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'a&gt;</code></span><div class="docblock"><p>Optional database that we use to fetch data from. If database is not present, we will
return not existing account and storage.</p>
<p>Note: It is marked as Send so database can be shared between threads.</p>
</div><span id="structfield.transition_state" class="structfield section-header"><a href="#structfield.transition_state" class="anchor field">§</a><code>transition_state: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../struct.TransitionState.html" title="struct reth_revm::TransitionState">TransitionState</a>&gt;</code></span><div class="docblock"><p>Block state, it aggregates transactions transitions into one state.</p>
<p>Build reverts and state that gets applied to the state.</p>
</div><span id="structfield.bundle_state" class="structfield section-header"><a href="#structfield.bundle_state" class="anchor field">§</a><code>bundle_state: <a class="struct" href="struct.BundleState.html" title="struct reth_revm::db::BundleState">BundleState</a></code></span><div class="docblock"><p>After block is finishes we merge those changes inside bundle.
Bundle is used to update database and create changesets.
Bundle state can be set on initialization if we want to use preloaded bundle.</p>
</div><span id="structfield.use_preloaded_bundle" class="structfield section-header"><a href="#structfield.use_preloaded_bundle" class="anchor field">§</a><code>use_preloaded_bundle: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code></span><div class="docblock"><p>Addition layer that is going to be used to fetched values before fetching values
from database.</p>
<p>Bundle is the main output of the state execution and this allows setting previous bundle
and using its values for execution.</p>
</div><span id="structfield.block_hashes" class="structfield section-header"><a href="#structfield.block_hashes" class="anchor field">§</a><code>block_hashes: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/collections/btree/map/struct.BTreeMap.html" title="struct alloc::collections::btree::map::BTreeMap">BTreeMap</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>, <a class="struct" href="../precompile/primitives/struct.FixedBytes.html" title="struct reth_revm::precompile::primitives::FixedBytes">FixedBytes</a>&lt;32&gt;&gt;</code></span><div class="docblock"><p>If EVM asks for block hash we will first check if they are found here.
and then ask the database.</p>
<p>This map can be used to give different values for block hashes if in case
The fork block is different or some blocks are not saved inside database.</p>
</div><script src="../../type.impl/reth_revm/struct.State.js" data-self-path="reth_revm::StateDBBox" async></script></section></div></main></body></html>