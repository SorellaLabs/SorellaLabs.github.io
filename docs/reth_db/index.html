<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="reth’s database abstraction layer with concrete implementations."><title>reth_db - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-e883e87179a81222.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="reth_db" data-themes="" data-resource-suffix="" data-rustdoc-version="1.76.0-nightly (de686cbc6 2023-12-14)" data-channel="nightly" data-search-js="search-874d56868bf05518.js" data-settings-js="settings-fe03fdc259827cd2.js" ><script src="../static.files/storage-bc37acceda91d44a.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-77dede896d6ac08e.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-5d8b3c7633ad77ba.css"></noscript><link rel="icon" href="https://avatars0.githubusercontent.com/u/97369466?s=256"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../reth_db/index.html"><img src="https://raw.githubusercontent.com/paradigmxyz/reth/main/assets/reth-docs.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../reth_db/index.html"><img src="https://raw.githubusercontent.com/paradigmxyz/reth/main/assets/reth-docs.png" alt="logo"></a><h2><a href="../reth_db/index.html">reth_db</a><span class="version">0.1.0-alpha.14</span></h2></div><div class="sidebar-elems"><ul class="block">
            <li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#macros">Macros</a></li><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">reth_db</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/reth_db/lib.rs.html#1-309">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>reth’s database abstraction layer with concrete implementations.</p>
<p>The database abstraction assumes that the underlying store is a KV store subdivided into tables.</p>
<p>One or more changes are tied to a transaction that is atomically committed to the data store at
the same time. Strong consistency in what data is written and when is important for reth, so it
is not possible to write data to the database outside of using a transaction.</p>
<p>Good starting points for this crate are:</p>
<ul>
<li><a href="abstraction/database/trait.Database.html" title="trait reth_db::abstraction::database::Database"><code>Database</code></a> for the main database abstraction</li>
<li><a href="abstraction/transaction/trait.DbTx.html" title="trait reth_db::abstraction::transaction::DbTx"><code>DbTx</code></a> (RO) and <a href="abstraction/transaction/trait.DbTxMut.html" title="trait reth_db::abstraction::transaction::DbTxMut"><code>DbTxMut</code></a> (RW) for the transaction abstractions.</li>
<li><a href="abstraction/cursor/trait.DbCursorRO.html" title="trait reth_db::abstraction::cursor::DbCursorRO"><code>DbCursorRO</code></a> (RO) and <a href="abstraction/cursor/trait.DbCursorRW.html" title="trait reth_db::abstraction::cursor::DbCursorRW"><code>DbCursorRW</code></a> (RW) for the cursor abstractions (see below).</li>
</ul>
<h2 id="cursors-and-walkers"><a href="#cursors-and-walkers">Cursors and Walkers</a></h2>
<p>The abstraction also defines a couple of helpful abstractions for iterating and writing data:</p>
<ul>
<li><strong>Cursors</strong> (<a href="abstraction/cursor/trait.DbCursorRO.html" title="trait reth_db::abstraction::cursor::DbCursorRO"><code>DbCursorRO</code></a> / <a href="abstraction/cursor/trait.DbCursorRW.html" title="trait reth_db::abstraction::cursor::DbCursorRW"><code>DbCursorRW</code></a>) for iterating data in a table. Cursors are
assumed to resolve data in a sorted manner when iterating from start to finish, and it is safe
to assume that they are efficient at doing so.</li>
<li><strong>Walkers</strong> (<a href="abstraction/cursor/struct.Walker.html" title="struct reth_db::abstraction::cursor::Walker"><code>Walker</code></a> / <a href="abstraction/cursor/struct.RangeWalker.html" title="struct reth_db::abstraction::cursor::RangeWalker"><code>RangeWalker</code></a> / <a href="abstraction/cursor/struct.ReverseWalker.html" title="struct reth_db::abstraction::cursor::ReverseWalker"><code>ReverseWalker</code></a>) use cursors to walk the entries
in a table, either fully from a specific point, or over a range.</li>
</ul>
<p>Dup tables (see below) also have corresponding cursors and walkers (e.g. <a href="abstraction/cursor/trait.DbDupCursorRO.html" title="trait reth_db::abstraction::cursor::DbDupCursorRO"><code>DbDupCursorRO</code></a>).
These <strong>should</strong> be preferred when working with dup tables, as they provide additional methods
that are optimized for dup tables.</p>
<h2 id="tables"><a href="#tables">Tables</a></h2>
<p>reth has two types of tables: simple KV stores (one key, one value) and dup tables (one key,
many values). Dup tables can be efficient for certain types of data.</p>
<p>Keys are de/serialized using the <a href="abstraction/table/trait.Encode.html" title="trait reth_db::abstraction::table::Encode"><code>Encode</code></a> and <a href="abstraction/table/trait.Decode.html" title="trait reth_db::abstraction::table::Decode"><code>Decode</code></a> traits, and values are de/serialized
(“compressed”) using the <a href="abstraction/table/trait.Compress.html" title="trait reth_db::abstraction::table::Compress"><code>Compress</code></a> and <a href="abstraction/table/trait.Decompress.html" title="trait reth_db::abstraction::table::Decompress"><code>Decompress</code></a> traits.</p>
<p>Tables implement the <a href="abstraction/table/trait.Table.html" title="trait reth_db::abstraction::table::Table"><code>Table</code></a> trait.</p>
<h2 id="overview"><a href="#overview">Overview</a></h2>
<p>An overview of the current data model of reth can be found in the <a href="tables/index.html" title="mod reth_db::tables"><code>tables</code></a> module.</p>
</div></details><h2 id="reexports" class="section-header"><a href="#reexports">Re-exports</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.DatabaseEnv"><code>pub use mdbx::<a class="struct" href="mdbx/struct.DatabaseEnv.html" title="struct reth_db::mdbx::DatabaseEnv">DatabaseEnv</a>;</code></div></li><li><div class="item-name" id="reexport.DatabaseEnvKind"><code>pub use mdbx::<a class="enum" href="mdbx/enum.DatabaseEnvKind.html" title="enum reth_db::mdbx::DatabaseEnvKind">DatabaseEnvKind</a>;</code></div></li><li><div class="item-name"><code>pub use <a class="mod" href="abstraction/index.html" title="mod reth_db::abstraction">abstraction</a>::*;</code></div></li><li><div class="item-name"><code>pub use <a class="mod" href="tables/index.html" title="mod reth_db::tables">tables</a>::*;</code></div></li></ul><h2 id="modules" class="section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="abstraction/index.html" title="mod reth_db::abstraction">abstraction</a></div><div class="desc docblock-short">Traits defining the database abstractions, such as cursors and transactions.</div></li><li><div class="item-name"><a class="mod" href="mdbx/index.html" title="mod reth_db::mdbx">mdbx</a></div><div class="desc docblock-short">Bindings for <a href="https://libmdbx.dqdkfa.ru/">MDBX</a>.</div></li><li><div class="item-name"><a class="mod" href="snapshot/index.html" title="mod reth_db::snapshot">snapshot</a></div><div class="desc docblock-short">reth’s snapshot database table import and access</div></li><li><div class="item-name"><a class="mod" href="tables/index.html" title="mod reth_db::tables">tables</a></div><div class="desc docblock-short">Tables and data models.</div></li><li><div class="item-name"><a class="mod" href="test_utils/index.html" title="mod reth_db::test_utils">test_utils</a></div><div class="desc docblock-short">Collection of database test utilities</div></li><li><div class="item-name"><a class="mod" href="version/index.html" title="mod reth_db::version">version</a></div><div class="desc docblock-short">Database version utils.</div></li></ul><h2 id="macros" class="section-header"><a href="#macros">Macros</a></h2><ul class="item-table"><li><div class="item-name"><a class="macro" href="macro.add_snapshot_mask.html" title="macro reth_db::add_snapshot_mask">add_snapshot_mask</a></div><div class="desc docblock-short">Add mask to select <code>N</code> column values from a specific snapshot segment row.</div></li><li><div class="item-name"><a class="macro" href="macro.dupsort.html" title="macro reth_db::dupsort">dupsort</a></div><div class="desc docblock-short">Macro to declare duplicate key value table.</div></li><li><div class="item-name"><a class="macro" href="macro.impl_fixed_arbitrary.html" title="macro reth_db::impl_fixed_arbitrary">impl_fixed_arbitrary</a></div><div class="desc docblock-short">Implements the <code>Arbitrary</code> trait for types with fixed array types.</div></li><li><div class="item-name"><a class="macro" href="macro.table.html" title="macro reth_db::table">table</a></div><div class="desc docblock-short">Macro to declare key value table.</div></li></ul><h2 id="enums" class="section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.DatabaseError.html" title="enum reth_db::DatabaseError">DatabaseError</a></div><div class="desc docblock-short">Database error type.</div></li><li><div class="item-name"><a class="enum" href="enum.DatabaseWriteOperation.html" title="enum reth_db::DatabaseWriteOperation">DatabaseWriteOperation</a></div><div class="desc docblock-short">Database write operation type.</div></li></ul><h2 id="functions" class="section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.init_db.html" title="fn reth_db::init_db">init_db</a></div><div class="desc docblock-short">Opens up an existing database or creates a new one at the specified path. Creates tables if
necessary. Read/Write mode.</div></li><li><div class="item-name"><a class="fn" href="fn.is_database_empty.html" title="fn reth_db::is_database_empty">is_database_empty</a></div><div class="desc docblock-short">Check if a db is empty. It does not provide any information on the
validity of the data in it. We consider a database as non empty when it’s a non empty directory.</div></li><li><div class="item-name"><a class="fn" href="fn.open_db.html" title="fn reth_db::open_db">open_db</a></div><div class="desc docblock-short">Opens up an existing database. Read/Write mode with WriteMap enabled. It doesn’t create it or
create tables if missing.</div></li><li><div class="item-name"><a class="fn" href="fn.open_db_read_only.html" title="fn reth_db::open_db_read_only">open_db_read_only</a></div><div class="desc docblock-short">Opens up an existing database. Read only mode. It doesn’t create it or create tables if missing.</div></li></ul></section></div></main></body></html>