<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="rkyv"><title>rkyv - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-5bc39a1768837dd0.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="rkyv" data-themes="" data-resource-suffix="" data-rustdoc-version="1.78.0-nightly (b11fbfbf3 2024-02-03)" data-channel="nightly" data-search-js="search-dd67cee4cfa65049.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-4c98445ec4002617.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-48f368f3872407c8.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-04d5337699b92874.css"></noscript><link rel="icon" href="
    data:image/svg+xml,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27;
    viewBox=&#x27;0 0 26.458 26.458&#x27;%3E%3Cpath d=&#x27;M0 0v26.458h26.458V0zm9.175 3.772l8.107 8.106
    2.702-2.702 2.702 13.512-13.512-2.702 2.703-2.702-8.107-8.107z&#x27;/%3E%3C/svg%3E
"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../rkyv/index.html"><img src="
    data:image/svg+xml,%3Csvg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;100&quot; height=&quot;100&quot;
    viewBox=&quot;0 0 26.458 26.458&quot;%3E%3Cpath d=&quot;M0 0v26.458h26.458V0zm9.175 3.772l8.107 8.106
    2.702-2.702 2.702 13.512-13.512-2.702 2.703-2.702-8.107-8.107z&quot;/%3E%3C/svg%3E
" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../rkyv/index.html"><img src="
    data:image/svg+xml,%3Csvg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;100&quot; height=&quot;100&quot;
    viewBox=&quot;0 0 26.458 26.458&quot;%3E%3Cpath d=&quot;M0 0v26.458h26.458V0zm9.175 3.772l8.107 8.106
    2.702-2.702 2.702 13.512-13.512-2.702 2.703-2.702-8.107-8.107z&quot;/%3E%3C/svg%3E
" alt="logo"></a><h2><a href="../rkyv/index.html">rkyv</a><span class="version">0.7.44</span></h2></div><div class="sidebar-elems"><ul class="block">
            <li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#macros">Macros</a></li><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li><li><a href="#types">Type Aliases</a></li><li><a href="#derives">Derive Macros</a></li></ul></section></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../rkyv/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">rkyv</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/rkyv/lib.rs.html#1-755">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="rkyv"><a class="doc-anchor" href="#rkyv">§</a>rkyv</h2>
<p>rkyv (<em>archive</em>) is a zero-copy deserialization framework for Rust.</p>
<p>It’s similar to other zero-copy deserialization frameworks such as
<a href="https://capnproto.org">Cap’n Proto</a> and <a href="https://google.github.io/flatbuffers">FlatBuffers</a>.
However, while the former have external schemas and heavily restricted data types, rkyv allows
all serialized types to be defined in code and can serialize a wide variety of types that the
others cannot. Additionally, rkyv is designed to have little to no overhead, and in most cases
will perform exactly the same as native types.</p>
<h3 id="design"><a class="doc-anchor" href="#design">§</a>Design</h3>
<p>Like <a href="https://serde.rs">serde</a>, rkyv uses Rust’s powerful trait system to serialize data without
the need for reflection. Despite having a wide array of features, you also only pay for what you
use. If your data checks out, the serialization process can be as simple as a <code>memcpy</code>! Like
serde, this allows rkyv to perform at speeds similar to handwritten serializers.</p>
<p>Unlike serde, rkyv produces data that is guaranteed deserialization free. If you wrote your data
to disk, you can just <code>mmap</code> your file into memory, cast a pointer, and your data is ready to
use. This makes it ideal for high-performance and IO-bound applications.</p>
<p>Limited data mutation is supported through <code>Pin</code> APIs, and archived values can be truly
deserialized with <a href="trait.Deserialize.html" title="trait rkyv::Deserialize"><code>Deserialize</code></a> if full mutation capabilities are needed.</p>
<p><a href="https://rkyv.org">The book</a> has more details on the design and capabilities of rkyv.</p>
<h3 id="type-support"><a class="doc-anchor" href="#type-support">§</a>Type support</h3>
<p>rkyv has a hashmap implementation that is built for zero-copy deserialization, so you can
serialize your hashmaps with abandon. The implementation performs perfect hashing with the
compress, hash and displace algorithm to use as little memory as possible while still performing
fast lookups.</p>
<p>It also comes with a B+ tree implementation that is built for maximum performance by splitting
data into easily-pageable 4KB segments. This makes it perfect for building immutable databases
and structures for bulk data.</p>
<p>rkyv also has support for contextual serialization, deserialization, and validation. It can
properly serialize and deserialize shared pointers like <code>Rc</code> and <code>Arc</code>, and can be extended to
support custom contextual types.</p>
<p>Finally, rkyv makes it possible to serialize trait objects and use them <em>as trait objects</em>
without deserialization. See the <code>archive_dyn</code> crate for more details.</p>
<h3 id="tradeoffs"><a class="doc-anchor" href="#tradeoffs">§</a>Tradeoffs</h3>
<p>While rkyv is a great format for final data, it lacks a full schema system and isn’t well
equipped for data migration and schema upgrades. If your use case requires these capabilities,
you may need additional libraries the build these features on top of rkyv. You can use other
serialization frameworks like serde with the same types as rkyv conflict-free.</p>
<h3 id="features"><a class="doc-anchor" href="#features">§</a>Features</h3>
<ul>
<li>
<p><code>alloc</code>: Enables types that require the <code>alloc</code> crate. Enabled by default.</p>
</li>
<li>
<p><code>arbitrary_enum_discriminant</code>: Enables the <code>arbitrary_enum_discriminant</code> feature for stable
multibyte enum discriminants using <code>archive_le</code> and <code>archive_be</code>. Requires nightly.</p>
</li>
<li>
<p><code>archive_be</code>: Forces archives into a big-endian format. This guarantees cross-endian
compatibility optimized for big-endian architectures.</p>
</li>
<li>
<p><code>archive_le</code>: Forces archives into a little-endian format. This guarantees cross-endian
compatibility optimized for little-endian architectures.</p>
</li>
<li>
<p><code>copy</code>: Enables copy optimizations for packed copyable data types. Requires nightly.</p>
</li>
<li>
<p><code>copy_unsafe</code>: Automatically opts all potentially copyable types into copy optimization. This
broadly improves performance but may cause uninitialized bytes to be copied to the output.
Requires nightly.</p>
</li>
<li>
<p><code>size_16</code>: Archives integral <code>*size</code> types as 16-bit integers. This is intended to be used
only for small archives and may not handle large, more general data.</p>
</li>
<li>
<p><code>size_32</code>: Archives integral <code>*size</code> types as 32-bit integers. Enabled by default.</p>
</li>
<li>
<p><code>size_64</code>: Archives integral <code>*size</code> types as 64-bit integers. This is intended to be used
only for very large archives and may cause unnecessary data bloat.</p>
</li>
<li>
<p><code>std</code>: Enables standard library support. Enabled by default.</p>
</li>
<li>
<p><code>strict</code>: Guarantees that types will have the same representations across platforms and
compilations. This is already the case in practice, but this feature provides a guarantee
along with C type compatibility.</p>
<p><em>Note</em>: Enabling <code>strict</code> will disable <a href="trait.Archive.html" title="trait rkyv::Archive"><code>Archive</code></a> implementations for tuples, as tuples
do not have a C type layout. Making a generic <code>Tuple&lt;T1, T2&gt;</code> and deriving <a href="trait.Archive.html" title="trait rkyv::Archive"><code>Archive</code></a> for it
should provide similar functionality.</p>
</li>
<li>
<p><code>validation</code>: Enables validation support through <code>bytecheck</code>.</p>
</li>
</ul>
<h3 id="crate-support"><a class="doc-anchor" href="#crate-support">§</a>Crate support</h3>
<p>Some common crates need to be supported by rkyv before an official integration has been made.
Support is provided by rkyv for these crates, but in the future crates should depend on rkyv and
provide their own implementations. The crates that already have support provided by rkyv should
work toward integrating the implementations into themselves.</p>
<p>Crates supported by rkyv:</p>
<ul>
<li><a href="https://docs.rs/indexmap"><code>indexmap</code></a></li>
<li><a href="https://docs.rs/rend"><code>rend</code></a> <em>Enabled automatically when using endian-specific archive
features.</em></li>
<li><a href="https://docs.rs/tinyvec"><code>tinyvec</code></a></li>
<li><a href="https://docs.rs/uuid"><code>uuid</code></a></li>
</ul>
<p>Support for each of these crates can be enabled with a feature of the same name. Additionally,
the following external crate features are available:</p>
<ul>
<li><code>alloc</code> with <code>tinyvec/alloc</code>: Supports types behind the <code>alloc</code> feature in <code>tinyvec</code>.</li>
<li><code>std</code> with <code>uuid/std</code>: Enables the <code>std</code> feature in <code>uuid</code>.</li>
</ul>
<h3 id="examples"><a class="doc-anchor" href="#examples">§</a>Examples</h3>
<ul>
<li>See <a href="trait.Archive.html" title="trait rkyv::Archive"><code>Archive</code></a> for examples of how to use rkyv through the derive macro and manual
implementation.</li>
<li>For more details on the derive macro and its capabilities, see
<a href="derive.Archive.html" title="derive rkyv::Archive"><code>Archive</code></a>.</li>
<li>Fully worked examples using rkyv are available in the
<a href="https://github.com/rkyv/rkyv/tree/master/examples"><code>examples</code> directory</a> of the source repo.</li>
</ul>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.check_archived_root_with_context"><code>pub use validation::<a class="fn" href="validation/fn.check_archived_root_with_context.html" title="fn rkyv::validation::check_archived_root_with_context">check_archived_root_with_context</a>;</code></div></li><li><div class="item-name" id="reexport.check_archived_value_with_context"><code>pub use validation::<a class="fn" href="validation/fn.check_archived_value_with_context.html" title="fn rkyv::validation::check_archived_value_with_context">check_archived_value_with_context</a>;</code></div></li><li><div class="item-name" id="reexport.check_archived_root"><code>pub use validation::validators::<a class="fn" href="validation/validators/fn.check_archived_root.html" title="fn rkyv::validation::validators::check_archived_root">check_archived_root</a>;</code></div></li><li><div class="item-name" id="reexport.check_archived_value"><code>pub use validation::validators::<a class="fn" href="validation/validators/fn.check_archived_value.html" title="fn rkyv::validation::validators::check_archived_value">check_archived_value</a>;</code></div></li><li><div class="item-name" id="reexport.from_bytes"><code>pub use validation::validators::<a class="fn" href="validation/validators/fn.from_bytes.html" title="fn rkyv::validation::validators::from_bytes">from_bytes</a>;</code></div></li><li><div class="item-name" id="reexport.rend"><code>pub use <a class="mod" href="../rend/index.html" title="mod rend">rend</a>;</code></div></li><li><div class="item-name" id="reexport.bytecheck"><code>pub use <a class="mod" href="../bytecheck/index.html" title="mod bytecheck">bytecheck</a>;</code></div></li><li><div class="item-name"><code>pub use <a class="mod" href="util/index.html" title="mod rkyv::util">util</a>::*;</code></div></li></ul><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="boxed/index.html" title="mod rkyv::boxed">boxed</a></div><div class="desc docblock-short">An archived version of <code>Box</code>.</div></li><li><div class="item-name"><a class="mod" href="collections/index.html" title="mod rkyv::collections">collections</a></div><div class="desc docblock-short">Archived versions of standard library containers.</div></li><li><div class="item-name"><a class="mod" href="de/index.html" title="mod rkyv::de">de</a></div><div class="desc docblock-short">Deserialization traits, deserializers, and adapters.</div></li><li><div class="item-name"><a class="mod" href="ffi/index.html" title="mod rkyv::ffi">ffi</a></div><div class="desc docblock-short">Archived versions of FFI types.</div></li><li><div class="item-name"><a class="mod" href="net/index.html" title="mod rkyv::net">net</a></div><div class="desc docblock-short">Archived versions of network types.</div></li><li><div class="item-name"><a class="mod" href="niche/index.html" title="mod rkyv::niche">niche</a></div><div class="desc docblock-short">Manually niched type replacements.</div></li><li><div class="item-name"><a class="mod" href="ops/index.html" title="mod rkyv::ops">ops</a></div><div class="desc docblock-short">Archived versions of <code>ops</code> types.</div></li><li><div class="item-name"><a class="mod" href="option/index.html" title="mod rkyv::option">option</a></div><div class="desc docblock-short">An archived version of <code>Option</code>.</div></li><li><div class="item-name"><a class="mod" href="rc/index.html" title="mod rkyv::rc">rc</a></div><div class="desc docblock-short">Archived versions of shared pointers.</div></li><li><div class="item-name"><a class="mod" href="rel_ptr/index.html" title="mod rkyv::rel_ptr">rel_ptr</a></div><div class="desc docblock-short">Relative pointer implementations and options.</div></li><li><div class="item-name"><a class="mod" href="result/index.html" title="mod rkyv::result">result</a></div><div class="desc docblock-short">An archived version of <code>Result</code>.</div></li><li><div class="item-name"><a class="mod" href="ser/index.html" title="mod rkyv::ser">ser</a></div><div class="desc docblock-short">Serialization traits, serializers, and adapters.</div></li><li><div class="item-name"><a class="mod" href="string/index.html" title="mod rkyv::string">string</a></div><div class="desc docblock-short">Archived versions of string types.</div></li><li><div class="item-name"><a class="mod" href="time/index.html" title="mod rkyv::time">time</a></div><div class="desc docblock-short">Archived versions of <code>time</code> types.</div></li><li><div class="item-name"><a class="mod" href="util/index.html" title="mod rkyv::util">util</a></div><div class="desc docblock-short">Utilities for common archive operations.</div></li><li><div class="item-name"><a class="mod" href="validation/index.html" title="mod rkyv::validation">validation</a></div><div class="desc docblock-short">Validation implementations and helper types.</div></li><li><div class="item-name"><a class="mod" href="vec/index.html" title="mod rkyv::vec">vec</a></div><div class="desc docblock-short">An archived version of <code>Vec</code>.</div></li><li><div class="item-name"><a class="mod" href="with/index.html" title="mod rkyv::with">with</a></div><div class="desc docblock-short">Wrapper type support and commonly used wrappers.</div></li></ul><h2 id="macros" class="section-header">Macros<a href="#macros" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="macro" href="macro.from_archived.html" title="macro rkyv::from_archived">from_archived</a></div><div class="desc docblock-short">Returns the unarchived value of the given archived primitive.</div></li><li><div class="item-name"><a class="macro" href="macro.out_field.html" title="macro rkyv::out_field">out_field</a></div><div class="desc docblock-short">Returns a tuple of <code>(field_pos, field_out)</code>, where <code>field_pos</code> is the “position”,
i.e. offset in bytes, of the field relative to the base address of the struct and <code>field_out</code>
is a <code>*mut</code> that points to the field directly.</div></li><li><div class="item-name"><a class="macro" href="macro.to_archived.html" title="macro rkyv::to_archived">to_archived</a></div><div class="desc docblock-short">Returns the archived value of the given archived primitive.</div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Infallible.html" title="struct rkyv::Infallible">Infallible</a></div><div class="desc docblock-short">A fallible type that cannot produce errors.</div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.Archive.html" title="trait rkyv::Archive">Archive</a></div><div class="desc docblock-short">A type that can be used without deserializing.</div></li><li><div class="item-name"><a class="trait" href="trait.ArchivePointee.html" title="trait rkyv::ArchivePointee">ArchivePointee</a></div><div class="desc docblock-short">An archived type with associated metadata for its relative pointer.</div></li><li><div class="item-name"><a class="trait" href="trait.ArchiveUnsized.html" title="trait rkyv::ArchiveUnsized">ArchiveUnsized</a></div><div class="desc docblock-short">A counterpart of <a href="trait.Archive.html" title="trait rkyv::Archive"><code>Archive</code></a> that’s suitable for unsized types.</div></li><li><div class="item-name"><a class="trait" href="trait.CheckBytes.html" title="trait rkyv::CheckBytes">CheckBytes</a></div><div class="desc docblock-short">A type that can check whether a pointer points to a valid value.</div></li><li><div class="item-name"><a class="trait" href="trait.Deserialize.html" title="trait rkyv::Deserialize">Deserialize</a></div><div class="desc docblock-short">Converts a type back from its archived form.</div></li><li><div class="item-name"><a class="trait" href="trait.DeserializeUnsized.html" title="trait rkyv::DeserializeUnsized">DeserializeUnsized</a></div><div class="desc docblock-short">A counterpart of <a href="trait.Deserialize.html" title="trait rkyv::Deserialize"><code>Deserialize</code></a> that’s suitable for unsized types.</div></li><li><div class="item-name"><a class="trait" href="trait.Fallible.html" title="trait rkyv::Fallible">Fallible</a></div><div class="desc docblock-short">A type that can produce an error.</div></li><li><div class="item-name"><a class="trait" href="trait.Serialize.html" title="trait rkyv::Serialize">Serialize</a></div><div class="desc docblock-short">Converts a type to its archived form.</div></li><li><div class="item-name"><a class="trait" href="trait.SerializeUnsized.html" title="trait rkyv::SerializeUnsized">SerializeUnsized</a></div><div class="desc docblock-short">A counterpart of <a href="trait.Serialize.html" title="trait rkyv::Serialize"><code>Serialize</code></a> that’s suitable for unsized types.</div></li></ul><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.Archived.html" title="type rkyv::Archived">Archived</a></div><div class="desc docblock-short">Alias for the archived version of some <a href="trait.Archive.html" title="trait rkyv::Archive"><code>Archive</code></a> type.</div></li><li><div class="item-name"><a class="type" href="type.ArchivedMetadata.html" title="type rkyv::ArchivedMetadata">ArchivedMetadata</a></div><div class="desc docblock-short">Alias for the archived metadata for some <a href="trait.ArchiveUnsized.html" title="trait rkyv::ArchiveUnsized"><code>ArchiveUnsized</code></a> type.</div></li><li><div class="item-name"><a class="type" href="type.FixedIsize.html" title="type rkyv::FixedIsize">FixedIsize</a></div><div class="desc docblock-short">The native type that <code>isize</code> is converted to for archiving.</div></li><li><div class="item-name"><a class="type" href="type.FixedUsize.html" title="type rkyv::FixedUsize">FixedUsize</a></div><div class="desc docblock-short">The native type that <code>usize</code> is converted to for archiving.</div></li><li><div class="item-name"><a class="type" href="type.MetadataResolver.html" title="type rkyv::MetadataResolver">MetadataResolver</a></div><div class="desc docblock-short">Alias for the metadata resolver for some <a href="trait.ArchiveUnsized.html" title="trait rkyv::ArchiveUnsized"><code>ArchiveUnsized</code></a> type.</div></li><li><div class="item-name"><a class="type" href="type.RawRelPtr.html" title="type rkyv::RawRelPtr">RawRelPtr</a></div><div class="desc docblock-short">The default raw relative pointer.</div></li><li><div class="item-name"><a class="type" href="type.RelPtr.html" title="type rkyv::RelPtr">RelPtr</a></div><div class="desc docblock-short">The default relative pointer.</div></li><li><div class="item-name"><a class="type" href="type.Resolver.html" title="type rkyv::Resolver">Resolver</a></div><div class="desc docblock-short">Alias for the resolver for some <a href="trait.Archive.html" title="trait rkyv::Archive"><code>Archive</code></a> type.</div></li></ul><h2 id="derives" class="section-header">Derive Macros<a href="#derives" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="derive" href="derive.Archive.html" title="derive rkyv::Archive">Archive</a></div><div class="desc docblock-short">Derives <code>Archive</code> for the labeled type.</div></li><li><div class="item-name"><a class="derive" href="derive.CheckBytes.html" title="derive rkyv::CheckBytes">CheckBytes</a></div><div class="desc docblock-short">Derives <code>CheckBytes</code> for the labeled type.</div></li><li><div class="item-name"><a class="derive" href="derive.Deserialize.html" title="derive rkyv::Deserialize">Deserialize</a></div><div class="desc docblock-short">Derives <code>Deserialize</code> for the labeled type.</div></li><li><div class="item-name"><a class="derive" href="derive.Serialize.html" title="derive rkyv::Serialize">Serialize</a></div><div class="desc docblock-short">Derives <code>Serialize</code> for the labeled type.</div></li></ul></section></div></main></body></html>