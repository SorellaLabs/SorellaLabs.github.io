<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Discovery v4 implementation: https://github.com/ethereum/devp2p/blob/master/discv4.md"><title>reth_discv4 - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-5bc39a1768837dd0.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="reth_discv4" data-themes="" data-resource-suffix="" data-rustdoc-version="1.78.0-nightly (b11fbfbf3 2024-02-03)" data-channel="nightly" data-search-js="search-dd67cee4cfa65049.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-4c98445ec4002617.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-48f368f3872407c8.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-04d5337699b92874.css"></noscript><link rel="icon" href="https://avatars0.githubusercontent.com/u/97369466?s=256"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../reth_discv4/index.html"><img src="https://raw.githubusercontent.com/paradigmxyz/reth/main/assets/reth-docs.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../reth_discv4/index.html"><img src="https://raw.githubusercontent.com/paradigmxyz/reth/main/assets/reth-docs.png" alt="logo"></a><h2><a href="../reth_discv4/index.html">reth_discv4</a><span class="version">0.1.0-alpha.17</span></h2></div><div class="sidebar-elems"><ul class="block">
            <li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../reth_discv4/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">reth_discv4</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/reth_discv4/lib.rs.html#1-2626">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Discovery v4 implementation: <a href="https://github.com/ethereum/devp2p/blob/master/discv4.md">https://github.com/ethereum/devp2p/blob/master/discv4.md</a></p>
<p>Discv4 employs a kademlia-like routing table to store and manage discovered peers and topics.
The protocol allows for external IP discovery in NAT environments through regular PING/PONG’s
with discovered nodes. Nodes return the external IP address that they have received and a simple
majority is chosen as our external IP address. If an external IP address is updated, this is
produced as an event to notify the swarm (if one is used for this behaviour).</p>
<p>This implementation consists of a <a href="struct.Discv4.html" title="struct reth_discv4::Discv4"><code>Discv4</code></a> and <a href="struct.Discv4Service.html" title="struct reth_discv4::Discv4Service"><code>Discv4Service</code></a> pair. The service manages the
state and drives the UDP socket. The (optional) <a href="struct.Discv4.html" title="struct reth_discv4::Discv4"><code>Discv4</code></a> serves as the frontend to interact
with the service via a channel. Whenever the underlying table changes service produces a
<a href="enum.DiscoveryUpdate.html" title="enum reth_discv4::DiscoveryUpdate"><code>DiscoveryUpdate</code></a> that listeners will receive.</p>
<h3 id="feature-flags"><a class="doc-anchor" href="#feature-flags">§</a>Feature Flags</h3>
<ul>
<li><code>serde</code> (default): Enable serde support</li>
<li><code>test-utils</code>: Export utilities for testing</li>
</ul>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="error/index.html" title="mod reth_discv4::error">error</a></div><div class="desc docblock-short">Error types that can occur in this crate.</div></li><li><div class="item-name"><a class="mod" href="proto/index.html" title="mod reth_discv4::proto">proto</a></div><div class="desc docblock-short">Discovery v4 protocol implementation.</div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Discv4.html" title="struct reth_discv4::Discv4">Discv4</a></div><div class="desc docblock-short">The Discv4 frontend</div></li><li><div class="item-name"><a class="struct" href="struct.Discv4Config.html" title="struct reth_discv4::Discv4Config">Discv4Config</a></div><div class="desc docblock-short">Configuration parameters that define the performance of the discovery network.</div></li><li><div class="item-name"><a class="struct" href="struct.Discv4ConfigBuilder.html" title="struct reth_discv4::Discv4ConfigBuilder">Discv4ConfigBuilder</a></div><div class="desc docblock-short">Builder type for <a href="struct.Discv4Config.html" title="struct reth_discv4::Discv4Config"><code>Discv4Config</code></a></div></li><li><div class="item-name"><a class="struct" href="struct.Discv4Service.html" title="struct reth_discv4::Discv4Service">Discv4Service</a></div><div class="desc docblock-short">Manages discv4 peer discovery over UDP.</div></li><li><div class="item-name"><a class="struct" href="struct.EnrForkIdEntry.html" title="struct reth_discv4::EnrForkIdEntry">EnrForkIdEntry</a></div><div class="desc docblock-short">Represents a forward-compatible ENR entry for including the forkid in a node record via
EIP-868. Forward compatibility is achieved by allowing trailing fields.</div></li><li><div class="item-name"><a class="struct" href="struct.NodeRecord.html" title="struct reth_discv4::NodeRecord">NodeRecord</a></div><div class="desc docblock-short">Represents a ENR in discovery.</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.DiscoveryUpdate.html" title="enum reth_discv4::DiscoveryUpdate">DiscoveryUpdate</a></div><div class="desc docblock-short">Represents node related updates state changes in the underlying node table</div></li><li><div class="item-name"><a class="enum" href="enum.Discv4Event.html" title="enum reth_discv4::Discv4Event">Discv4Event</a></div><div class="desc docblock-short">The Event type the Service stream produces.</div></li><li><div class="item-name"><a class="enum" href="enum.NatResolver.html" title="enum reth_discv4::NatResolver">NatResolver</a></div><div class="desc docblock-short">reexport to get public ip.
All builtin resolvers.</div></li></ul><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.DEFAULT_DISCOVERY_ADDR.html" title="constant reth_discv4::DEFAULT_DISCOVERY_ADDR">DEFAULT_DISCOVERY_ADDR</a></div><div class="desc docblock-short">The default address for discv4 via UDP</div></li><li><div class="item-name"><a class="constant" href="constant.DEFAULT_DISCOVERY_ADDRESS.html" title="constant reth_discv4::DEFAULT_DISCOVERY_ADDRESS">DEFAULT_DISCOVERY_ADDRESS</a></div><div class="desc docblock-short">The default address for discv4 via UDP: “0.0.0.0:30303”</div></li><li><div class="item-name"><a class="constant" href="constant.DEFAULT_DISCOVERY_PORT.html" title="constant reth_discv4::DEFAULT_DISCOVERY_PORT">DEFAULT_DISCOVERY_PORT</a></div><div class="desc docblock-short">The default port for discv4 via UDP</div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.external_ip.html" title="fn reth_discv4::external_ip">external_ip</a></div><div class="desc docblock-short">reexport to get public ip.
Attempts to produce an IP address with all builtin resolvers (best effort).</div></li></ul></section></div></main></body></html>